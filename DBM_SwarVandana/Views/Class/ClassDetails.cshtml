@model ViewModel.ClassDetailViewModel
@using Code;
@{
    ViewBag.Title = "ClassDetails";
    Layout = "~/Views/Shared/_Layout.cshtml";
    //Layout = null;
}
<link href="~/Content/css/jquery-ui.css" rel="stylesheet" />
<script src="~/Content/js/jquery-ui.js"></script>
<!-- start container -->
<div class="container">

    <!-- registration-form -->
    <div class="registration-form">
        @using (Html.BeginForm("ClassDetails", "Class", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            <div>
                @if (!string.IsNullOrEmpty(ViewBag.Success))
                {
                    <div class="successvalidation">
                        @ViewBag.Success
                    </div>
                }
                else
                {
                    <div>@Html.ValidationSummary(false)</div>
                }

            </div>
            <h3>Create Class</h3>
            <div class="row">
                <label for="Password">Class Name :</label>
                @Html.TextBoxFor(x => x.ClassName, new { @class = "input" })
            </div>
            <div class="row">
                <label for="Password">Discipline :</label>
                @Html.DropDownListFor(x => x.DisciplineId, new ListBound(Model.DisciplineId, "Disciplines").Disciplines, "-- Select Discipline --", new { @class = "select" })
            </div>
            <div class="row">
                <label for="Password">Faculty :</label>
                @Html.DropDownListFor(x => x.FacultyId, new ListBound(Model.FacultyId, "Faculties").Faculties, "-- Select Faculty --", new { @class = "select" })
            </div>
            <div class="row">
                <label for="Password">Student Limit :</label>
                @Html.TextBoxFor(x => x.StudentLimit, new { @class = "input", @onkeypress = "return isNumberKey(event)", @maxlength = "7" })
            </div>
            <div class="row">
                <label for="Password">Start Date :</label>
                @Html.TextBoxFor(x => x.StartDate, new { @class = "input" ,@readonly="readonly"})
            </div>
            <div class="row">
                <label for="Password">End Date :</label>
                @Html.TextBoxFor(x => x.EndDate, new { @class = "input", @readonly = "readonly" })
            </div>
            <div class="row">
                <label for="Password">Is Active :</label>
                @Html.CheckBoxFor(x => x.IsActive, new { @class = "input" })
            </div>
            <div class="rowbutton">
                <input type="submit" id="btnSubmit" value="Submit" class="submit-btn" />
                <input name="button" type="button" value="Cancel" class="submit-btn" onclick="javascript: RedirectToHome();" />
            </div>
        }
    </div>

</div>
<script>
    $(document).ready(function () {
        $("#StartDate").datepicker({
            dateFormat: "dd M yy", minDate: "-3d",
            onSelect: function (dateStr) {
                $('#EndDate').datepicker('option', 'minDate', $(this).datepicker('getDate') || '-1y');
            }

        });
        $("#EndDate").datepicker({
            dateFormat: "dd M yy",
            minDate: "-1d",
            onSelect: function (dateStr) {
                $('#StartDate').datepicker('option', 'maxDate', $(this).datepicker('getDate') || 0);
            }
        });
    });
    function RedirectToHome() {
        window.location.href = ('@Url.Action("ClassDetailsList", "Class")');
    }
    function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode
        if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;
        return true;
    }
</script>
